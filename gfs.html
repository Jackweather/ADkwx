<head>
<!-- ...existing code... -->
<style>
  #top-navbar {
    width: 100vw;
    background: #263159;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 0 32px;
    height: 54px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2000;
    font-size: 1.5em;
    font-family: Arial, sans-serif;
    letter-spacing: 1.5px;
  }
  body {
    margin: 0;
    padding-top: 54px; /* prevent content underlap */
  }
  .layout-container {
    display: flex;
    min-height: 100vh;
    background: #f5f7fa;
    justify-content: center;
  }
  .main-content {
    max-width: 900px;
    margin: 0 auto;
    flex: 1;
    padding: 32px 24px;
    background: #fff;
    min-height: calc(100vh - 54px);
  }
  @media (max-width: 900px) {
    .main-content {
      padding: 16px 4vw;
    }
  }
  /* --- Add mobile styles for iPhone and similar devices --- */
  @media (max-width: 600px) {
    #main-img {
      max-width: 98vw !important;
      width: 98vw !important;
      height: 65vh !important;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 8px;
      box-shadow: 0 2px 12px #0002;
    }
    #main-img-container {
      padding: 0;
      margin: 0;
    }
    .main-content {
      padding: 4px 0 !important;
    }
    #fullscreen-img {
      max-width: 98vw !important;
      width: 98vw !important;
      max-height: 95vh !important;
      height: 95vh !important;
      object-fit: contain;
      border-radius: 10px;
      margin: 0 auto;
    }
    #fullscreen-modal {
      align-items: stretch;
      justify-content: flex-start;
      padding-top: 12px;
    }
    #arrow-controls {
      gap: 18px;
      margin-top: 8px;
    }
  }
  #fullscreen-modal {
    display: none;
    position: fixed;
    z-index: 3000;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(20,30,50,0.92);
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  #fullscreen-img {
    max-width: 96vw;
    max-height: 92vh;
    width: auto;
    height: auto;
    box-shadow: 0 4px 32px #000;
    border-radius: 10px;
    transition: opacity 0.25s;
    object-fit: contain;
    display: block;
    margin: 0 auto;
    cursor: pointer;
  }
  #arrow-controls {
    margin-top: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px;
  }
  #left-arrow, #right-arrow {
    font-size: 2.2em;
    padding: 6px 18px;
    border: none;
    background: #263159;
    color: #fff;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 8px #0003;
    transition: background 0.2s;
  }
  #zoom-btn {
    font-size: 1.3em;
    padding: 6px 18px;
    border: none;
    background: #263159;
    color: #fff;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 2px 8px #0003;
    transition: background 0.2s;
  }
  .side-btn {
    width: 90%;
    margin: 18px auto 0 auto;
    display: block;
    background: #41507a;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 12px 0;
    font-size: 1.1em;
    cursor: pointer;
    transition: background 0.18s;
  }
  .side-btn.active,
  .side-btn:active {
    background: #263159;
  }
  #gifs-navbar-btn {
    margin-left: 18px;
    background: #41507a;
    color: #fff;
    border: none;
    border-radius: 18px;
    padding: 8px 22px;
    font-size: 1em;
    cursor: pointer;
    box-shadow: 0 2px 8px #0002;
    transition: background 0.18s;
    letter-spacing: 1px;
  }
  #gifs-navbar-btn:hover {
    background: #263159;
  }
  #updates-navbar-btn, #community-navbar-btn {
    margin-left: 18px;
    background: #41507a;
    color: #fff;
    border: none;
    border-radius: 18px;
    padding: 8px 22px;
    font-size: 1em;
    cursor: pointer;
    box-shadow: 0 2px 8px #0002;
    transition: background 0.18s;
    letter-spacing: 1px;
  }
  #updates-navbar-btn:hover, #community-navbar-btn:hover {
    background: #263159;
  }
  #snow-navbar-btn {
    margin-left: 18px;
    background: #41507a;
    color: #fff;
    border: none;
    border-radius: 18px;
    padding: 8px 22px;
    font-size: 1em;
    cursor: pointer;
    box-shadow: 0 2px 8px #0002;
    transition: background 0.18s;
    letter-spacing: 1px;
  }
  #snow-navbar-btn:hover {
    background: #263159;
  }
</style>
</head>
<body>
  <div id="top-navbar">
    adkwx.com
    <button id="snow-navbar-btn" onclick="window.location.href='snow.html'">Snow</button>
    <button id="gifs-navbar-btn" onclick="window.location.href='gifs.html'">GIFS</button>
    <button id="updates-navbar-btn" onclick="window.location.href='updates.html'" style="margin-left:18px;background:#41507a;color:#fff;border:none;border-radius:18px;padding:8px 22px;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #0002;transition:background 0.18s;letter-spacing:1px;">Updates</button>
    <button id="community-navbar-btn" onclick="window.location.href='community.html'" style="margin-left:18px;background:#41507a;color:#fff;border:none;border-radius:18px;padding:8px 22px;font-size:1em;cursor:pointer;box-shadow:0 2px 8px #0002;transition:background 0.18s;letter-spacing:1px;">Community</button>
  </div>
  <div class="layout-container" style="justify-content:center;">
    <div class="main-content" style="max-width:900px;margin:0 auto;">
      <h2 style="color:#263159;text-align:center;margin-top:0;">Image Folders</h2>
      <div id="folder-list" style="margin-bottom:24px;"></div>
      <div id="main-img-container" style="text-align:center;display:none;">
        <img id="main-img" src="" alt="" style="max-width:70%;height:auto;border-radius:8px;box-shadow:0 2px 12px #0002;cursor:pointer;margin-bottom:12px;">
        <div id="main-slider-controls" style="margin-top:4px;">
          <input type="range" id="main-img-slider" min="0" max="0" value="0" style="width:80%;height:32px;display:none;">
          <div id="main-slider-label" style="color:#263159;margin-top:4px;font-size:1.1em;display:none;"></div>
          <div id="main-slider-arrows" style="margin-top:10px;display:flex;justify-content:center;gap:40px;">
            <button id="main-left-arrow" style="font-size:2em;padding:6px 18px;border:none;background:#263159;color:#fff;border-radius:50%;cursor:pointer;box-shadow:0 2px 8px #0003;">&#8592;</button>
            <button id="main-right-arrow" style="font-size:2em;padding:6px 18px;border:none;background:#263159;color:#fff;border-radius:50%;cursor:pointer;box-shadow:0 2px 8px #0003;">&#8594;</button>
          </div>
        </div>
      </div>
      <script>
        // --- New logic for folder listing and image navigation ---
        const folderList = document.getElementById('folder-list');
        const mainImgContainer = document.getElementById('main-img-container');
        const mainImg = document.getElementById('main-img');
        const mainImgSlider = document.getElementById('main-img-slider');
        const mainSliderLabel = document.getElementById('main-slider-label');
        const mainLeftArrow = document.getElementById('main-left-arrow');
        const mainRightArrow = document.getElementById('main-right-arrow');
        let currentFolder = null;
        let imgSrcs = [];
        let currentIdx = 0;

        // Simulate folder list (replace with server-side fetch if needed)
        const folders = [
          'PRATEGFS',
          'tmp_surface',
          '6hour_precip_total',
          '12hour_precip_total',
          '24hour_precip_total',
          'total_precip',
          'total_lcdc'
        ];

        function renderFolderList() {
          folderList.innerHTML = '';
          folders.forEach(folder => {
            const btn = document.createElement('button');
            btn.textContent = folder;
            btn.style = 'margin:8px 12px 8px 0;padding:10px 22px;background:#41507a;color:#fff;border:none;border-radius:8px;font-size:1.1em;cursor:pointer;box-shadow:0 2px 8px #0002;transition:background 0.18s;letter-spacing:1px;';
            btn.onclick = () => loadFolder(folder);
            folderList.appendChild(btn);
          });
        }

        function loadFolder(folder) {
          currentFolder = folder;
          // Simulate PNGs in folder (replace with server-side fetch if needed)
          let maxHour = 384;
          let step = 6;
          if (folder === '12hour_precip_total') step = 12;
          if (folder === '24hour_precip_total') step = 24;
          let hours = [];
          for (let hour = step; hour <= maxHour; hour += step) hours.push(hour);
          if (folder === 'PRATEGFS') {
            hours = [0].concat(hours);
          } else if (folder !== '12hour_precip_total' && folder !== '24hour_precip_total') {
            hours = [0].concat(hours);
          }
          imgSrcs = hours.map(hour => `/${folder}/${folder.includes('tmp') ? '2mtemp' : folder.includes('prate') ? 'prate' : folder.includes('precip') ? folder.replace('_total','').replace('total_','') : folder.includes('lcdc') ? 'total_lcdc' : ''}_${hour.toString().padStart(3, '0')}.png`);
          currentIdx = 0;
          showImageViewer();
        }

        function showImageViewer() {
          mainImgContainer.style.display = '';
          updateMainImage(currentIdx);
        }

        function updateMainImage(idx) {
          if (imgSrcs.length === 0) {
            mainImg.src = '';
            mainImg.alt = '';
            mainImgSlider.style.display = 'none';
            mainSliderLabel.style.display = 'none';
            return;
          }
          if (idx < 0) idx = 0;
          if (idx > imgSrcs.length - 1) idx = imgSrcs.length - 1;
          currentIdx = idx;
          mainImg.src = imgSrcs[currentIdx];
          mainImg.alt = `${currentFolder} ${currentIdx}`;
          if (imgSrcs.length > 1) {
            mainImgSlider.style.display = '';
            mainSliderLabel.style.display = '';
            mainImgSlider.max = imgSrcs.length - 1;
            mainImgSlider.value = currentIdx;
            mainSliderLabel.textContent = `Image ${currentIdx + 1} of ${imgSrcs.length}`;
          } else {
            mainImgSlider.style.display = 'none';
            mainSliderLabel.style.display = 'none';
          }
        }

        mainImgSlider.oninput = function() {
          if (imgSrcs.length === 0) return;
          let val = parseInt(mainImgSlider.value, 10);
          if (val < 0) val = 0;
          if (val > imgSrcs.length - 1) val = imgSrcs.length - 1;
          currentIdx = val;
          updateMainImage(currentIdx);
        };

        mainLeftArrow.onclick = function() {
          if (imgSrcs.length > 1) {
            let nextIdx = currentIdx - 1;
            if (nextIdx < 0) nextIdx = 0;
            currentIdx = nextIdx;
            updateMainImage(currentIdx);
          }
        };
        mainRightArrow.onclick = function() {
          if (imgSrcs.length > 1) {
            let nextIdx = currentIdx + 1;
            if (nextIdx > imgSrcs.length - 1) nextIdx = imgSrcs.length - 1;
            currentIdx = nextIdx;
            updateMainImage(currentIdx);
          }
        };

        document.addEventListener('keydown', function(e) {
          if (imgSrcs.length > 1 && mainImgContainer.style.display !== 'none') {
            if (e.key === 'ArrowLeft') {
              mainLeftArrow.click();
              e.preventDefault();
            } else if (e.key === 'ArrowRight') {
              mainRightArrow.click();
              e.preventDefault();
            }
          }
        });

        window.addEventListener('DOMContentLoaded', function() {
          renderFolderList();
        });
      </script>
      <!-- ...existing code... -->
    </div>
  </div>
</body>

