<head>
  <style>
    /* Copy styles from gfs.html */
    #top-navbar {
      width: 100vw;
      background: #263159;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 0 32px;
      height: 54px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 2000;
      font-size: 1.5em;
      font-family: Arial, sans-serif;
      letter-spacing: 1.5px;
    }
    #gfs-navbar-btn,
    #gifs-navbar-btn,
    #updates-navbar-btn,
    #community-navbar-btn {
      margin-left: 18px;
      background: #41507a;
      color: #fff;
      border: none;
      border-radius: 18px;
      padding: 8px 22px;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.18s;
      letter-spacing: 1px;
    }
    #gfs-navbar-btn:hover,
    #gifs-navbar-btn:hover,
    #updates-navbar-btn:hover,
    #community-navbar-btn:hover {
      background: #263159;
    }
    body {
      margin: 0;
      padding-top: 54px;
    }
    .layout-container {
      display: flex;
      min-height: 100vh;
      background: #f5f7fa;
    }
    .left-panel, .right-panel {
      width: 140px;
      background: #31416a;
      color: #fff;
      padding: 0;
      box-sizing: border-box;
      min-height: calc(100vh - 54px);
    }
    .main-content {
      flex: 1;
      padding: 12px 24px; /* reduced top padding */
      background: #fff;
      min-height: calc(100vh - 54px);
    }
    @media (max-width: 900px) {
      .left-panel, .right-panel {
        display: none;
      }
      .main-content {
        padding: 16px 4vw;
      }
    }
    .side-btn {
      width: 90%;
      margin: 18px auto 0 auto;
      display: block;
      background: #41507a;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 12px 0;
      font-size: 1.1em;
      cursor: pointer;
      transition: background 0.18s;
    }
    .side-btn.active,
    .side-btn:active {
      background: #263159;
    }
    #gif-image-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
    }
    #fullscreen-modal {
      display: none;
      position: fixed;
      z-index: 3000;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(20,30,50,0.92);
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    #fullscreen-img {
      max-width: 80vw;
      max-height: 75vh;
      width: auto;
      height: auto;
      box-shadow: 0 4px 32px #000;
      border-radius: 10px;
      transition: opacity 0.25s;
      object-fit: contain;
      display: block;
      margin: 0 auto;
      cursor: pointer;
    }
    #arrow-controls {
      margin-top: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
    }
    #left-arrow, #right-arrow {
      font-size: 2.2em;
      padding: 6px 18px;
      border: none;
      background: #263159;
      color: #fff;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 8px #0003;
      transition: background 0.2s;
    }
  </style>
</head>
<body>
  <div id="top-navbar">
    ADKWX.com
    <button id="gfs-navbar-btn" onclick="window.location.href='gfs.html'">MODELPAGE</button>
    <button id="gifs-navbar-btn" onclick="window.location.href='gifs.html'">GIFS</button>
    <button id="updates-navbar-btn" onclick="window.location.href='updates.html'">Updates</button>
    <button id="community-navbar-btn" onclick="window.location.href='community.html'">Community</button>
  </div>
  <div class="layout-container">
    <div class="left-panel">
      <div style="width:60%;margin:10px auto 0 auto;padding:4px 0;background:#263159;color:#fff;text-align:center;border-radius:5px;font-size:0.95em;letter-spacing:1px;">
        Snow Plots
      </div>
      <button id="positive-snow-btn" class="side-btn">Positive Snow Depth Change</button>
      <!-- Left panel content (optional, can add buttons here) -->
    </div>
    <div class="main-content">
      <div id="main-img-container" style="text-align:center;">
        <img id="main-img" src="" alt="" style="max-width:70%;height:auto;border-radius:8px;box-shadow:0 2px 12px #0002;cursor:pointer;">
        <div id="main-slider-controls" style="margin-top:4px;">
          <input type="range" id="main-img-slider" min="0" max="0" value="0" style="width:80%;height:32px;display:none;">
          <div id="main-slider-label" style="color:#263159;margin-top:4px;font-size:1.1em;display:none;"></div>
        </div>
      </div>
      <!-- Add your snow plot content here -->
      <script>
        // --- Main image and slider logic for snow plots ---
        const positiveSnowBtn = document.getElementById('positive-snow-btn');
        const mainImg = document.getElementById('main-img');
        const mainImgSlider = document.getElementById('main-img-slider');
        const mainSliderLabel = document.getElementById('main-slider-label');

        let snowHours = [];
        for (let hour = 0; hour <= 384; hour += 6) snowHours.push(hour);
        let snowImgSrcs = snowHours.map(hour => `/GFS/static/snow_depth/snowdepth_${hour.toString().padStart(3, '0')}.png`);
        let availableSnowImgs = [];
        let currentSnowIdx = 0;

        // Helper: Find first available PNG (not 404) in the folder and set slider to it
        function findFirstAvailableIndex(imgArray, callback) {
          let idx = 0;
          function checkNext() {
            if (idx >= imgArray.length) {
              callback(0); // fallback to 0 if none found
              return;
            }
            const testImg = new Image();
            testImg.onload = function() { callback(idx); };
            testImg.onerror = function() { idx++; checkNext(); };
            testImg.src = imgArray[idx];
          }
          checkNext();
        }

        function updateSnowMainImage(idx) {
          if (availableSnowImgs.length === 0) {
            mainImg.src = "";
            mainImg.alt = "";
            mainImgSlider.style.display = "none";
            mainSliderLabel.style.display = "none";
            return;
          }
          let minIdx = parseInt(mainImgSlider.min, 10) || 0;
          if (idx < minIdx) idx = minIdx;
          currentSnowIdx = idx;
          mainImg.src = availableSnowImgs[currentSnowIdx];
          mainImg.alt = `snowdepth_${snowHours[currentSnowIdx].toString().padStart(3, '0')}`;
          if (availableSnowImgs.length > 1) {
            mainImgSlider.style.display = "";
            mainSliderLabel.style.display = "";
            mainImgSlider.max = availableSnowImgs.length - 1;
            mainImgSlider.value = currentSnowIdx;
            mainSliderLabel.textContent = "Hour: " + (snowHours[currentSnowIdx] !== undefined ? snowHours[currentSnowIdx] : "");
          } else {
            mainImgSlider.style.display = "none";
            mainSliderLabel.style.display = "none";
          }
        }

        mainImgSlider.oninput = function() {
          if (availableSnowImgs.length === 0) return;
          let minIdx = parseInt(mainImgSlider.min, 10) || 0;
          let val = parseInt(mainImgSlider.value, 10);
          if (val < minIdx) val = minIdx;
          currentSnowIdx = val;
          updateSnowMainImage(currentSnowIdx);
        };

        positiveSnowBtn.onclick = function() {
          positiveSnowBtn.classList.add('active');
          // If you add more buttons, deactivate others here
          availableSnowImgs = snowImgSrcs.slice();
          // Find the first PNG that actually exists (not 404)
          findFirstAvailableIndex(availableSnowImgs, function(firstIdx) {
            currentSnowIdx = firstIdx;
            mainImgSlider.min = firstIdx;
            mainImgSlider.value = currentSnowIdx;
            updateSnowMainImage(currentSnowIdx);
          });
        };

        // Show positive snow depth change PNGs on page load
        window.addEventListener('DOMContentLoaded', function() {
          positiveSnowBtn.click();
        });

        // Keyboard navigation for main image (always active)
        document.addEventListener('keydown', function(e) {
          if (e.key === "ArrowLeft") {
            if (availableSnowImgs.length > 1) {
              let minIdx = parseInt(mainImgSlider.min, 10) || 0;
              let nextIdx = currentSnowIdx - 1;
              if (nextIdx < minIdx) nextIdx = minIdx;
              currentSnowIdx = nextIdx;
              updateSnowMainImage(currentSnowIdx);
            }
            e.preventDefault();
          } else if (e.key === "ArrowRight") {
            if (availableSnowImgs.length > 1) {
              let maxIdx = availableSnowImgs.length - 1;
              let nextIdx = currentSnowIdx + 1;
              if (nextIdx > maxIdx) nextIdx = maxIdx;
              currentSnowIdx = nextIdx;
              updateSnowMainImage(currentSnowIdx);
            }
            e.preventDefault();
          }
        });
      </script>
    </div>
    <div class="right-panel">
      <!-- Right panel content -->
    </div>
  </div>
</body>
</body>
      <!-- Right panel content -->
    </div>
  </div>
</body>
